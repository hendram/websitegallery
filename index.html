<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Design Gallery</title>

<style>
body{
  margin:0;
  font-family:system-ui,Segoe UI,Arial;
  background:#0b0d12;
  color:#fff;
}

/* ---------- HEADER ---------- */
.topbar{
  padding:18px 24px;
  display:flex;
  align-items:center;
  gap:18px;
  background:linear-gradient(90deg,#0b0d12,#141824,#0b0d12);
  box-shadow:0 10px 40px rgba(0,0,0,.6);
  position:sticky;
  top:0;
  z-index:50;
}

.logo{
  font-size:20px;
  font-weight:600;
  letter-spacing:.5px;
  opacity:.9;
}

/* ---------- MENU ---------- */
.menu{
  display:flex;
  gap:12px;
  align-items:center;
}

.menu-item{
  position:relative;
}

.menu-btn{
  background:#161a23;
  padding:10px 16px;
  border-radius:10px;
  cursor:pointer;
  font-size:14px;
  transition:.2s;
}
.menu-btn:hover{
  background:#1f2532;
}

/* dropdown */
.dropdown{
  position:absolute;
  top:120%;
  left:0;
  background:#151922;
  border-radius:14px;
  min-width:180px;
  padding:8px;
  display:none;
  box-shadow:0 20px 40px rgba(0,0,0,.7);
  animation:fade .15s ease;
}

.menu-item:hover .dropdown{
  display:block;
}

.dropdown div{
  padding:10px 12px;
  border-radius:8px;
  font-size:14px;
  cursor:pointer;
  opacity:.85;
}
.dropdown div:hover{
  background:#212735;
  opacity:1;
}

@keyframes fade{
  from{opacity:0; transform:translateY(6px)}
  to{opacity:1; transform:translateY(0)}
}

/* ---------- SEARCH ---------- */
.search-wrap{
  margin-left:10px;
  display:flex;
  gap:8px;
}

.search-wrap input{
  padding:10px 14px;
  border-radius:10px;
  border:none;
  background:#151922;
  color:#fff;
  width:240px;
}

.search-wrap button{
  padding:10px 18px;
  border:none;
  border-radius:10px;
  background:linear-gradient(90deg,#7b5cff,#b07cff);
  color:white;
  font-weight:600;
  cursor:pointer;
}
.search-wrap button:hover{
  opacity:.9;
}

/* ---------- GRID ---------- */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:22px;
  padding:26px;
}

.card{
  background:#141824;
  border-radius:16px;
  overflow:hidden;
  cursor:pointer;
  box-shadow:0 10px 30px rgba(0,0,0,.6);
  transition:.25s;
}
.card:hover{
  transform:translateY(-6px) scale(1.02);
}

.card img{
  width:100%;
  display:block;
}

.label{
  padding:12px;
  font-size:13px;
  opacity:.75;
}

.empty{
  padding:60px;
  text-align:center;
  opacity:.4;
  font-size:15px;
}

/* ---------- VIEWER ---------- */
.viewer{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.92);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}

.viewer img{
  max-width:90%;
  max-height:90%;
  border-radius:14px;
  box-shadow:0 0 60px black;
}
</style>
</head>
<body>

<div class="topbar">
  <div class="logo">Design Collection</div>

  <div class="menu">

    <div class="menu-item">
      <div class="menu-btn">First Tier</div>
      <div class="dropdown" id="tier1"></div>
    </div>

    <div class="menu-item">
      <div class="menu-btn">Second Tier</div>
      <div class="dropdown" id="tier2"></div>
    </div>

    <div class="menu-item">
      <div class="menu-btn">Third Tier</div>
      <div class="dropdown" id="tier3"></div>
    </div>

    <div class="search-wrap">
      <input id="search" placeholder="Search designs...">
      <button id="searchBtn">Search</button>
    </div>

  </div>
</div>

<div id="gallery" class="grid"></div>

<div id="viewer" class="viewer">
  <img id="viewerImg">
</div>

<script>
const user="hendram";
const repo="websitegallery";

const gallery=document.getElementById("gallery");
const viewer=document.getElementById("viewer");
const viewerImg=document.getElementById("viewerImg");

const tier1=document.getElementById("tier1");
const tier2=document.getElementById("tier2");
const tier3=document.getElementById("tier3");

let currentImages=[];
let currentPath="";

/* ---------- API ---------- */

async function fetchJSON(url){
  const r=await fetch(url);
  if(!r.ok) throw new Error(await r.text());
  return await r.json();
}

function enc(p){
  return p.split("/").map(encodeURIComponent).join("/");
}

function message(t){
  gallery.innerHTML=`<div class="empty">${t}</div>`;
}

/* ---------- LOAD DIRS ---------- */

async function getDirs(path=""){
  const items=await fetchJSON(
    `https://api.github.com/repos/${user}/${repo}/contents/${enc(path)}`
  );
  return items.filter(i=>i.type==="dir");
}

async function fillTier(container,path){
  container.innerHTML="Loading...";
  const dirs=await getDirs(path);
  container.innerHTML="";

  dirs.forEach(d=>{
    const el=document.createElement("div");
    el.textContent=d.name;
    el.onclick=()=>{
      currentPath=d.path;
      loadImages(currentPath);
    };
    container.appendChild(el);
  });

  if(!dirs.length)
    container.innerHTML="<div>Empty</div>";
}

/* ---------- IMAGE LOAD ---------- */

async function loadImages(path){
  message("Loading...");
  currentImages=[];

  try{
    const items=await fetchJSON(
      `https://api.github.com/repos/${user}/${repo}/contents/${enc(path)}`
    );

    for(const item of items){
      if(item.type==="file" && item.name.match(/\.(png|jpg|jpeg|webp|gif)$/i)){
        currentImages.push(item);
      }
    }

    render();

  }catch(e){
    console.error(e);
    message("Failed loading folder");
  }
}

/* ---------- RENDER ---------- */

function render(){
  const term=document.getElementById("search").value.toLowerCase();
  gallery.innerHTML="";

  const filtered=currentImages.filter(i=>
    i.name.toLowerCase().includes(term)
  );

  if(!filtered.length){
    message("No results");
    return;
  }

  filtered.forEach((file,i)=>{
    const card=document.createElement("div");
    card.className="card";

    card.innerHTML=`
      <img src="${file.download_url}">
      <div class="label">${file.name}</div>
    `;

    card.onclick=()=>{
      viewerImg.src=file.download_url;
      viewer.style.display="flex";
    };

    gallery.appendChild(card);
  });
}

/* ---------- SEARCH ---------- */

document.getElementById("searchBtn").onclick=render;
document.getElementById("search").oninput=render;

/* ---------- VIEWER ---------- */

viewer.onclick=e=>{
  if(e.target===viewer) viewer.style.display="none";
};

document.addEventListener("keydown",e=>{
  if(e.key==="Escape") viewer.style.display="none";
});

/* ---------- INIT ---------- */

fillTier(tier1,"");

tier1.parentElement.onmouseenter=()=>fillTier(tier1,"");
tier2.parentElement.onmouseenter=()=>fillTier(tier2,currentPath);
tier3.parentElement.onmouseenter=()=>fillTier(tier3,currentPath);
</script>

</body>
</html>
