<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Design Gallery</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:#0f1115;
  color:white;
}
h1{
  padding:20px;
  margin:0;
}
#controls{
  padding:0 20px 10px 20px;
}
select{
  padding:8px;
  border-radius:8px;
  border:none;
  background:#1a1d23;
  color:white;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:20px;
  padding:20px;
}
.card{
  background:#1a1d23;
  border-radius:14px;
  overflow:hidden;
  box-shadow:0 10px 25px rgba(0,0,0,.4);
  transition:.25s;
}
.card:hover{
  transform:translateY(-5px);
}
.card img{
  width:100%;
  display:block;
}
.label{
  padding:10px;
  font-size:13px;
  opacity:.7;
}
.empty{
  padding:40px;
  text-align:center;
  opacity:.5;
}
</style>
</head>
<body>

<h1>UI Design Collection</h1>

<div id="controls">
<select id="folderSelect">
<option value="">Loading folders...</option>
</select>
</div>

<div id="gallery" class="grid"></div>

<script>
const user = "hendram";
const repo = "websitegallery";

const select = document.getElementById("folderSelect");
const gallery = document.getElementById("gallery");

async function fetchJSON(url){
  const res = await fetch(url);
  if(!res.ok) throw new Error("GitHub API error");
  return await res.json();
}

async function loadFolders(){
  try{
    const data = await fetchJSON(`https://api.github.com/repos/${user}/${repo}/contents`);

    const folders = data.filter(item => item.type === "dir");

    if(!folders.length){
      select.innerHTML = `<option>No folders found</option>`;
      return;
    }

    select.innerHTML = `<option value="">Select folder</option>`;

    folders.forEach(f=>{
      const opt = document.createElement("option");
      opt.value = f.name;
      opt.textContent = f.name;
      select.appendChild(opt);
    });

  }catch(err){
    select.innerHTML = `<option>Error loading repo</option>`;
    console.error(err);
  }
}

async function loadImages(folder){
  gallery.innerHTML = `<div class="empty">Loading...</div>`;

  try{
    const files = await fetchJSON(
      `https://api.github.com/repos/${user}/${repo}/contents/${folder}`
    );

    gallery.innerHTML = "";

    const images = files.filter(file =>
      file.name.match(/\.(png|jpg|jpeg|webp|gif)$/i)
    );

    if(!images.length){
      gallery.innerHTML = `<div class="empty">No images found</div>`;
      return;
    }

    images.forEach(file=>{
      const card = document.createElement("div");
      card.className = "card";

      card.innerHTML = `
        <img src="${file.download_url}">
        <div class="label">${folder}</div>
      `;

      gallery.appendChild(card);
    });

  }catch(err){
    gallery.innerHTML = `<div class="empty">Failed to load images</div>`;
    console.error(err);
  }
}

select.addEventListener("change", e=>{
  if(e.target.value) loadImages(e.target.value);
});

loadFolders();
</script>

</body>
</html>
